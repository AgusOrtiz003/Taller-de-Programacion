programa p5p1  {preguntar si estÃ¡n bien bloqueadas las esquinas}
procesos
  proceso juntarFlores(ES f:numero)
  comenzar
    mientras(HayFlorEnLaEsquina)
      tomarFlor
      f:=f+1
  fin
  proceso juntarPapeles(ES p:numero)
  comenzar
    mientras(HayPapelEnLaEsquina)
      tomarPapel
      p:=p+1
  fin
  proceso recibirMensajes(ES totF:numero;ES totP:numero)
  variables
    f,p:numero
  comenzar
    RecibirMensaje(f,r1)
    totF:=totF+f
    RecibirMensaje(f,r2)
    totF:=totF+f
    RecibirMensaje(p,a1)
    totP:=totP+p
    RecibirMensaje(p,a2)
    totP:=totP+p
  fin
  proceso avanzarAv(ES f:numero)
  variables
    av,ca:numero
  comenzar
    si(PosCa>=99)
      av:=PosAv
      ca:=PosCa-1
      LiberarEsquina(av,ca)
    juntarFlores(f)
    si((PosCa=97)|(PosCa=98)) 
      av:=PosAv
      ca:=PosCa+1
      BloquearEsquina(av,ca)
    mover
  fin
  proceso avanzarCa(ES p:numero)
  variables
    av,ca:numero
  comenzar
    si((PosAv=3)|(PosAv=4))
      av:=PosAv-1
      ca:=PosCa
      LiberarEsquina(av,ca)
    juntarPapeles(p)
    si(PosAv<3)
      av:=PosAv+1
      ca:=PosCa
      BloquearEsquina(av,ca)
    mover
  fin
areas
  area1R1:AreaP(2,1,2,97)
  area1R2:AreaP(3,1,3,97)
  area1A1:AreaP(1,98,1,98)
  area1A2:AreaP(1,99,1,99)
  areaCritica:AreaPC(2,98,3,99)
  area2A1:AreaP(4,98,100,98)
  area2A2:AreaP(4,99,100,99)
  area2R1:AreaP(2,100,2,100)
  area2R2:AreaP(3,100,3,100)
  areaF:AreaP(100,100,100,100)
robots
  robot Rojo
  variables
    f:numero
  comenzar
    f:=0
    mientras(PosCa<100)
      avanzarAv(f)
    EnviarMensaje(f,rF)
  fin
  robot Azul
  variables
    p:numero
  comenzar
    p:=0
    derecha
    mientras(PosAv<100)
      avanzarCa(p)
    EnviarMensaje(p,rF)
  fin
  robot Fiscalizador
  variables
    totF,totP:numero
  comenzar
    totF:=0
    totP:=0
    recibirMensajes(totF,totP)
    si(totF>=totP)
      Informar('El ganador es el equipo rojo',V)
    sino
      Informar('El ganador es el equipo azul',V)
  fin
variables
  r1,r2:Rojo
  a1,a2:Azul
  rF:Fiscalizador
comenzar
  AsignarArea(r1,area1R1)
  AsignarArea(r1,area2R1)
  AsignarArea(r2,area1R2)
  AsignarArea(r2,area2R2)
  AsignarArea(a1,area1A1)
  AsignarArea(a1,area2A1)
  AsignarArea(a2,area1A2)
  AsignarArea(a2,area2A2)
  AsignarArea(r1,areaCritica)
  AsignarArea(r2,areaCritica)
  AsignarArea(a1,areaCritica)
  AsignarArea(a2,areaCritica)
  AsignarArea(rF,areaF)
  Iniciar(r1,2,1)
  Iniciar(r2,3,1)
  Iniciar(a1,1,98)
  Iniciar(a2,1,99)
  Iniciar(rF,100,100)
fin
